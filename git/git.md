Полезные приемы при работе с Git
================================================================================
Сборник рецептов для работы с системой контроля версий Git, а также удаленными
репозиториями. Большинство рецептов найдены на просторах сети, но проверены на
практике. Применение некоторых может быть связано с рисками, так что если Вы
решили воспользовать одним из них, то вся ответственность лежит только на Вас.


Создание "чистого" репозитория
--------------------------------------------------------------------------------
Под "чистым" или "голым" репозиторием понимается репозиторий Git, не имеющий
рабочей директории, а содержащий только служебную информацию. Используется для
предоставления общего доступа к репозиторию.

Создание "чистого" репозитория на основе существующего

    $ git clone --bare repository repository.git

Теперь можно скопировать полученный repository.git на удаленный сервер и
настроить доступ к нему, например, по протоколу SSH.

Для того, чтобы добавить "чистый" репозиторий к оригинальному нужно перейти в
каталог оригинального репозитория и выполнить команду:

    $ cd repository
    $ git remote add origin ../repository.git
    $ git fetch


Изменение сообщения в последнем коммите
--------------------------------------------------------------------------------
Можно изменить сообщение последнего коммита

    $ git commit --amend

Или добавить в него что-то, что хотелось добавить но не удалось

    $ git add .
    $ git commit --amend -m 'Текст сообщения коммита'


Перенос последнего коммита в другую ветку
--------------------------------------------------------------------------------
В случае сохранения коммита в ошибочно выбранную ветку

Первый вариант, отменяем последний коммит, но сохраняем изменения в рабочей
директории

    $ git reset HEAD~ --soft
    $ git stash
    $ git checkout correct-branch-name
    $ git stash pop
    $ git add .
    $ git commit -m 'Текст сообщения коммита'

Второй вариант, используем cherry-pick

    $ git checkout correct-branch-name
    $ git cherry-pick master
    $ git checkout master
    $ git reset HEAD~ --hard




Отмена сделанного коммита, отправленного на удаленный репозиторий
--------------------------------------------------------------------------------
Отмена коммита отправленного на удаленный репозиторий может иметь очень
серьезные последствия, так что использовать этот рецет только в случае крайней
необходимости и отсутствия возможности использовать другой способ!

> В качестве примера используется сценарий удаления ошибочного коммита из ветки
> master, который является самым последним.

Первоначально нужно сохранить изменения, которые вошли в ошибочный коммит,
например, сохранить их в отдельной ветке или убрать в stash!

    $ git branch new-branch-name

Получаем все изменения из удаленного репозитория

    $ git checkout master
    $ git fetch --all
    $ git rebase origin/master

Далее делаем "жесткий" сброс указателя на HEAD на одни коммит назад и загружаем
в удаленный репозиторий с режимом "ускоренной перемотки" (force).

    $ git reset --hard HEAD~1
    $ git push origin master -f


Рекомендации по написанию комментариев для коммита
--------------------------------------------------------------------------------
1. Однострочный комментарий желательно делать не более 50 знаков.
2. Отделять заголовок от описания пустой строкой
3. Для более развернутых комментариев рекомендуется использовать не более 72
   символов в строке.
4. Сообщение для коммита нужно писать в настоящем времени, а не в прошедшем, вы
   маркируете то, что делает этот коммит, а не то, что сделали вы, как
   создатель.


Просмотр изменений
--------------------------------------------------------------------------------
Для более удобного просмотра изменений можно использовать ключ --color-words

    $ git diff --color-words fileName

Перенос длинных строк при просмотре "-" -> shift + s -> Enter


Очистка рабочей директории от неотслеживаемых файлов
--------------------------------------------------------------------------------
Тестовый запуск очистки

    $ git clean -n

Удаление неотслеживаемых файлов из директории

    $ git clean -f


Работа с удаленными репозиториями
--------------------------------------------------------------------------------
Подключение удаленного репозитория

    $ git remote add <alias> <url>

Просмотр удаленных репозиториев с побробной информацией

    $ git remote -v

Удаление удаленного репозитория

    $ git remote rm <alias>

Просмотр веток удаленного репозитория

    $ git branch -r

Просмотр веток удаленного и локального репозитория

    $ git branch -a

Отправление данных на удаленный репозиторий

    $ git push -u <alias> <branchName>

Клонирование удаленного репозитория

    $ git clone <url> <nameFolder>

Получение данных из удаленного репозитория

    $ git fetch <alias>

Слияние ветки из удаленного хранилища и текущей веткой

    $ git merge <alias>/<nameBranch>

Объединяем две операции в одну git pull = git fetch + git merge


